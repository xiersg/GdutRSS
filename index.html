<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown阅读器 | 玻璃弹珠效果</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        :root {
            --primary: #1e88e5;
            --primary-light: #64b5f6;
            --primary-dark: #0d47a1;
            --text: #333;
            --text-light: #666;
            --background: #ffffff;
            --border: #e0e0e0;
            --shadow: rgba(0, 0, 0, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
        }
        
        body {
            background: var(--background);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem;
            padding-bottom: 150px; /* 为弹珠留出空间 */
        }
        
        header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--border);
        }
        
        .title {
            font-size: 2.2rem;
            color: var(--primary-dark);
            margin-bottom: 0.5rem;
        }
        
        .subtitle {
            font-size: 1.1rem;
            color: var(--text-light);
            font-weight: 400;
        }
        
        .tools {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 1.5rem 0;
        }
        
        .btn {
            padding: 0.8rem 1.5rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 30px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(30, 136, 229, 0.3);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .btn:hover {
            background: var(--primary-dark);
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(30, 136, 229, 0.4);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn.secondary {
            background: white;
            color: var(--primary);
            border: 1px solid var(--primary);
        }
        
        .content {
            background: white;
            border-radius: 12px;
            padding: 2.5rem;
            box-shadow: 0 8px 30px var(--shadow);
            margin-bottom: 2rem;
            position: relative;
            z-index: 10;
        }
        
        #markdown-content {
            line-height: 1.8;
        }
        
        #markdown-content h2 {
            color: var(--primary-dark);
            margin: 2rem 0 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border);
        }
        
        #markdown-content h3 {
            color: var(--primary);
            margin: 1.8rem 0 1rem;
        }
        
        #markdown-content p {
            margin-bottom: 1.2rem;
            color: var(--text);
        }
        
        #markdown-content ul, 
        #markdown-content ol {
            margin: 1rem 0 1.5rem 1.5rem;
        }
        
        #markdown-content li {
            margin-bottom: 0.6rem;
        }
        
        #markdown-content code {
            background: rgba(30, 136, 229, 0.1);
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: 'Fira Code', monospace;
            font-size: 0.95em;
            color: var(--primary-dark);
        }
        
        #markdown-content pre {
            background: rgba(30, 136, 229, 0.05);
            padding: 1.2rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1.5rem 0;
            border-left: 3px solid var(--primary-light);
        }
        
        #markdown-content pre code {
            background: none;
            padding: 0;
            color: var(--text);
        }
        
        /* 弹珠容器 */
        .marble-container {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 150px;
            pointer-events: none;
            z-index: 5;
            overflow: hidden;
        }
        
        /* 弹珠样式 */
        .marble {
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, white, rgba(30, 136, 229, 0.8));
            box-shadow: 
                0 0 10px rgba(255, 255, 255, 0.8),
                0 0 20px rgba(30, 136, 229, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.5);
            animation: marble-glow 2s infinite alternate;
        }
        
        @keyframes marble-glow {
            0% { box-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgba(30, 136, 229, 0.6); }
            100% { box-shadow: 0 0 15px rgba(255, 255, 255, 0.9), 0 0 30px rgba(30, 136, 229, 0.8); }
        }
        
        footer {
            text-align: center;
            padding: 2rem 0;
            color: var(--text-light);
            font-size: 0.9rem;
        }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            .container {
                padding: 1.5rem;
                padding-bottom: 120px;
            }
            
            .content {
                padding: 1.5rem;
            }
            
            .title {
                font-size: 1.8rem;
            }
        }
        
        /* 加载指示器 */
        .loader {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
        }
        
        .loader-circle {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(30, 136, 229, 0.2);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1 class="title">Markdown阅读器</h1>
            <p class="subtitle">自动加载并渲染index.md文件</p>
            
            <div class="tools">
                <button class="btn" id="add-marble">
                    <i class="fas fa-plus"></i> 添加玻璃弹珠
                </button>
                <button class="btn secondary" id="clear-marbles">
                    <i class="fas fa-trash"></i> 清除弹珠
                </button>
            </div>
        </header>
        
        <main>
            <div class="content">
                <div id="markdown-content">
                    <div class="loader">
                        <div class="loader-circle"></div>
                    </div>
                </div>
            </div>
        </main>
        
        <footer>
            <p>简约Markdown阅读器 | 玻璃弹珠效果</p>
        </footer>
    </div>
    
    <div class="marble-container" id="marble-container"></div>
    
    <!-- 使用FontAwesome图标 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    
    <script>
        // 加载并渲染index.md文件
        function loadAndRenderMarkdown() {
            fetch('/index.md')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('无法加载index.md文件');
                    }
                    return response.text();
                })
                .then(markdownText => {
                    // 使用marked.js渲染Markdown
                    document.getElementById('markdown-content').innerHTML = marked.parse(markdownText);
                })
                .catch(error => {
                    console.error('加载Markdown文件时出错:', error);
                    document.getElementById('markdown-content').innerHTML = `
                        <div class="error-message">
                            <h2>加载内容失败</h2>
                            <p>${error.message}</p>
                            <p>请确保index.md文件与此HTML文件在同一目录下。</p>
                        </div>
                    `;
                });
        }
        
        // 页面加载完成后渲染Markdown
        document.addEventListener('DOMContentLoaded', loadAndRenderMarkdown);
        
        // 弹珠效果
        const marbleContainer = document.getElementById('marble-container');
        const marbles = [];
        
        // 添加弹珠按钮
        document.getElementById('add-marble').addEventListener('click', function() {
            createMarble();
        });
        
        // 清除弹珠按钮
        document.getElementById('clear-marbles').addEventListener('click', function() {
            marbles.forEach(marble => {
                marble.element.remove();
            });
            marbles.length = 0;
        });
        
        // 创建弹珠
        function createMarble() {
            const marble = document.createElement('div');
            marble.className = 'marble';
            
            // 随机颜色
            const hue = Math.floor(Math.random() * 360);
            marble.style.background = `radial-gradient(circle at 30% 30%, white, hsl(${hue}, 80%, 60%))`;
            
            // 随机大小
            const size = 20 + Math.random() * 20;
            marble.style.width = `${size}px`;
            marble.style.height = `${size}px`;
            
            // 初始位置（屏幕顶部随机位置）
            const startX = Math.random() * window.innerWidth;
            marble.style.left = `${startX}px`;
            marble.style.top = `-50px`;
            
            marbleContainer.appendChild(marble);
            
            // 弹珠物理属性
            const marbleObj = {
                element: marble,
                x: startX,
                y: -50,
                size: size,
                velocityX: (Math.random() - 0.5) * 4, // 随机水平速度
                velocityY: 0,
                gravity: 0.2,
                elasticity: 0.8, // 弹性系数
                friction: 0.99,  // 摩擦力
                hue: hue
            };
            
            marbles.push(marbleObj);
        }
        
        // 弹珠物理模拟
        function updateMarbles() {
            const containerHeight = marbleContainer.clientHeight;
            
            for (let i = 0; i < marbles.length; i++) {
                const marble = marbles[i];
                
                // 应用重力
                marble.velocityY += marble.gravity;
                
                // 应用摩擦力
                marble.velocityX *= marble.friction;
                marble.velocityY *= marble.friction;
                
                // 更新位置
                marble.x += marble.velocityX;
                marble.y += marble.velocityY;
                
                // 边界碰撞检测
                if (marble.x <= 0) {
                    marble.x = 0;
                    marble.velocityX = Math.abs(marble.velocityX) * marble.elasticity;
                } else if (marble.x + marble.size >= window.innerWidth) {
                    marble.x = window.innerWidth - marble.size;
                    marble.velocityX = -Math.abs(marble.velocityX) * marble.elasticity;
                }
                
                // 底部碰撞检测
                if (marble.y + marble.size >= containerHeight) {
                    marble.y = containerHeight - marble.size;
                    marble.velocityY = -Math.abs(marble.velocityY) * marble.elasticity;
                    
                    // 添加碰撞效果
                    marble.element.style.boxShadow = `0 0 20px rgba(255, 255, 255, 0.9), 0 0 40px hsl(${marble.hue}, 80%, 60%)`;
                    setTimeout(() => {
                        marble.element.style.boxShadow = '';
                    }, 100);
                }
                
                // 应用位置
                marble.element.style.left = `${marble.x}px`;
                marble.element.style.top = `${marble.y}px`;
                
                // 移除屏幕外的弹珠
                if (marble.y > containerHeight + 100) {
                    marble.element.remove();
                    marbles.splice(i, 1);
                    i--;
                }
            }
            
            requestAnimationFrame(updateMarbles);
        }
        
        // 启动弹珠物理模拟
        updateMarbles();
        
        // 添加一些初始弹珠
        for (let i = 0; i < 3; i++) {
            setTimeout(() => createMarble(), i * 800);
        }
    </script>
</body>
</html>